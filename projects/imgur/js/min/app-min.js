var app=angular.module("imgur",[]);app.service("imageService",function(e,t){function r(t){var r=e({method:"get",url:"https://api.imgur.com/3/gallery/hot/viral/"+t});return r.then(a,i)}function a(e){return e.data}function i(e){return t.reject(!angular.isObject(e.data)||e.data.message?"An unknown error occurred.":e.data.message)}return{getGallery:r}}),app.controller("GalleryCtrl",function(e,t){function r(){angular.forEach(e.images.data,function(e){console.log(e.gallery_link),"undefined"!=typeof e.gallery_link||e.gallery_link||(e.gallery_link=e.is_album?"https://i.imgur.com/"+e.cover+"b.jpg":e.link.replace(e.id,e.id+"b"))})}function a(t){var a;"undefined"==typeof e.images.data?(a=0,e.images.data=t.data):(a=e.images.data.length,e.images.data=e.images.data.concat(t.data)),r(a),console.log("Success")}e.images=[],e.searching=!1,e.signInDropdown=!1,e.infoShow=!1,e.imageLimit=60,e.pageNum=0,e.getGallery=function(){t.getGallery(e.pageNum).then(function(e){a(e)},function(){console.log("Failure getting gallery")})},e.loadMore=function(){e.imageLimit+60>=e.images.data.length?(e.pageNum++,e.getGallery()):e.imageLimit+=60},e.getGallery()}),app.directive("imageGrid",function(){return{restrict:"E",templateUrl:"partials/image-grid.html"}}),app.directive("searchClosed",function(){return{restrict:"E",templateUrl:"partials/search-closed.html"}}),app.directive("searchFocused",function(){return{restrict:"E",templateUrl:"partials/search-focused.html"}}),app.directive("searchFooter",function(){return{restrict:"E",templateUrl:"partials/search-footer.html"}}),app.directive("signinDropdown",function(){return{restrict:"E",templateUrl:"partials/signin-dropdown.html"}}),app.directive("sentenceSort",function(){return{restrict:"E",templateUrl:"partials/sentence-sorting.html"}}),app.directive("cards",function(){return{restrict:"E",templateUrl:"partials/cards.html"}}),app.directive("whenScrolled",function(){return function(e,t,r){var a=t[0];t.bind("scroll",function(){a.scrollTop+a.offsetHeight>=a.scrollHeight-100&&e.$apply(r.whenScrolled)})}});